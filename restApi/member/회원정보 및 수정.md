---
REST API - Member created by TK 
---

## Member : 회원정보 및 수정 

- `회원정보 조회`
- `이미지 업로드`
- `회원정보 수정`
- `닉네임 중복 체크` : <u>추후 추가 후 공유 예정</u> 

**회원정보 수정 절차** : 회원정보 (프로필 이미지, 닉네임, 관심 카테고리)를 수정할 때 케이스를 크게 두 가지로 나눌 수 있다. **1) 프로필 이미지를 변경하는 경우** **2) 프로필 이미지를 변경하지 않은 경우** 이 때 프로필 이미지를 변경한다는 것은 마지막 프로필 이미지를 기준으로 다른 사진 또는 기본 값으로 변경하는 지를 의미한다. 

프로필 이미지를 변경하는 경우는 순서적으로 먼저 이미지 업로드 성공 응답을 받고, 회원정보를 수정 요청을 보내는 절차로 진행한다. 프로필 이미지 업로드 과정에서 문제가 발생한 상황에서 닉네임과 관심카테고리가 수정되는 경우를 방지하기 위해서이다. 프로필 이미지가 변경되지 않은 경우, 이미지 업로드 요청을 보내지 않고 바로 회원정보 수정 엔드포인트로 요청을 보낸다. 

구체적인 요청과 응답 값은 아래서 확인한다. 

___

### 회원정보  조회 

**URL** : `/user/auth/profile`

**Method** : `GET`

**Authentication required** : `Yes`

**Data** : `None`

## Success Responses

___

**Code** : `200 OK`

**Content**

`message`: 응답 메시지 

`status`: 응답 상태 

`data`: 회원정보 

​		`profileImageDir` : 프로필 이미지 저장경로

​	    `nickName` : 닉네임

​		`productCategories` : 관심 카테고리

​                `category_id` : 상품 카테고리 고유 ID 

​	            `category_name` : 상품 카테고리명 

**example**

```json
{
    "message": "회원 정보 조회",
    "status": 200,
    "data": {
        "profileImageDir": "1.jpg", 
        "nickName": "윤태권",
        "productCategories": [
            {
                "category_id": 13,
                "category_name": "반려동물 용품"
            },
            {
                "category_id": 14,
                "category_name": "기타"
            },
            {
                "category_id": 12,
                "category_name": "홈 인테리어"
            }
        ]
    }
}
```



___

### 프로필 이미지 업로드

**URL** : `/user/auth/profileimg-upload`

**Method** : `POST`

**Authentication required** : `Yes`

**Data** :  * 기존 `member_modify.html` 코드에서 `name` 속성 추가됐습니다. 참고해주세요.

```html
<input type="file" class="hidden" id="InputFile", name="image"
       accept="image/gif, image/jpeg, image/png, image/jpg, image/bmp"/>
```

## Success Responses

**Code** : `200 OK`

**Content**

`message`: 응답 메시지 

`status`: 응답 상태 

`data`: 파일명 + 확장자 

**example**

```json
{

  "message": "회원 프로필 이미지 업로드",

  "status": 200,

  "data": "2.jpg" // 응답받은 파일명 : 회원정보 수정 시 요청 값으로 활용 (전체 디렉토리를 저장하지 않음)

}
```

이미지 저장 경로 : `/src/main/resources/static/images/user-profile/user-id/` +

`270/user_id.jpg/`

`770/user_id.jpg/`  

`1430/user_id.jpg/`

예를 들어 user_id가 2인  경우, 

`/src/main/resources/static/images/user-profile/2/` +

`270/2.jpg/`

`770/2.jpg/`  

`1430/2.jpg/`

___

### 회원정보 수정 

**URL** : `/user/auth/profile-update`

**Method** : `POST`

**Authentication required** : `Yes`

**Data** : 요청 값 예시 

```json
{
 "profileImageDir" : "파일명 + 확장자", // 이미지 업로드 응답 값에서 파싱 후 활용       
 "nickName" : "닉네임",
 "productCategories" :  
 [ 
                        {
                            "category_id" : 12, 
                            "category_name" : "홈 인테리어"
                        },
                                                {
                            "category_id" : 13, 
                            "category_name" : "반려동물 용품"
                        },
                                                {
                            "category_id" : 14, 
                            "category_name" : "기타"
                        }

]
}
```

## Success Responses

___

**Code** : `200 OK`

**Content**

`message`: 응답 메시지 

`status`: 응답 상태 

`data`: NULL 

**example**

```json
{

  "message": "회원 정보 수정",

  "status": 200,

  "data": null

}
```